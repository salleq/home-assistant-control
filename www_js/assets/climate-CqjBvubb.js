import{u as h,m as x,c as $,h as S,E as k,L as g,d as N,l as A,a as j,r as b,Y as T,X as _,J as p,B as f,T as D,H as O,o as z}from"./index-lMiL1DkS.js";const C=new Set(["temperature","current_temperature","target_temperature","target_temp_temp","target_temp_high","target_temp_low","target_temp_step","min_temp","max_temp"]),K={light:{brightness:t=>Math.round(t/255*100).toString()},media_player:{volume_level:t=>Math.round(t*100).toString(),media_duration:t=>N(t.toString(),"s")}},E={climate:{humidity:"%",current_humidity:"%",target_humidity_low:"%",target_humidity_high:"%",target_humidity_step:"%",min_humidity:"%",max_humidity:"%"},cover:{current_position:"%",current_tilt_position:"%"},fan:{percentage:"%"},humidifier:{humidity:"%",current_humidity:"%",min_humidity:"%",max_humidity:"%"},light:{color_temp:"mired",max_mireds:"mired",min_mireds:"mired",color_temp_kelvin:"K",min_color_temp_kelvin:"K",max_color_temp_kelvin:"K",brightness:"%"},sun:{azimuth:"°",elevation:"°"},vacuum:{battery_level:"%"},valve:{current_position:"%"},sensor:{battery_level:"%"},media_player:{volume_level:"%"}},F=(t,a,s)=>{const i=t.unit_system.length||"";switch(s){case"visibility":return a.attributes.visibility_unit||i;case"precipitation":return a.attributes.precipitation_unit||(i==="km"?"mm":"in");case"pressure":return a.attributes.pressure_unit||(i==="km"?"hPa":"inHg");case"temperature":case"templow":return a.attributes.temperature_unit||t.unit_system.temperature;case"wind_speed":return a.attributes.wind_speed_unit||`${i}/h`;case"humidity":case"precipitation_probability":return"%";default:{const n=t.unit_system;return s in n?n[s]:""}}},v=(t,a,s,i,n)=>{var o,c;const r=n!==void 0?n:t.attributes[i];if(r===null)return h("unknown");if(typeof r=="number"){const e=x(t.entity_id),l=(o=K[e])==null?void 0:o[i],d=l?l(r):$(r);let m=(c=E[e])==null?void 0:c[i];return e==="weather"?m=F(a,t,i):C.has(i)&&(m=a.unit_system.temperature),m?`${d}${m}`:d}if(typeof r=="string"&&S(r,!0)){if(k(r)){const l=new Date(r);if(g(l))return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"}).format(l)}const e=new Date(r);if(g(e))return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(e)}return Array.isArray(r)&&r.some(e=>e instanceof Object)||!Array.isArray(r)&&r instanceof Object?JSON.stringify(r):Array.isArray(r)?r.map(e=>v(t,a,s,i,e)).join(", "):h(r)},H=O("div",{target:"e1ri2dm00"})({name:"fz81w7",styles:"display:flex;flex-direction:column;justify-content:center;white-space:nowrap;.target,.current{display:flex;flex-direction:row;flex-wrap:nowrap;gap:0.25rem;justify-content:flex-end;}.target{color:var(--ha-S50-contrast);}.current{color:var(--ha-S500-contrast);}.state-label{font-weight:bold;}.unit{}"});function J({entity:t,className:a,...s}){const{useStore:i}=A(),n=i(u=>u.config),r=i(u=>u.entities),o=i(u=>u.connection),c=j(t.state),e=b.useCallback(u=>v(t,n,r,u),[t,n,r]),l=b.useCallback(()=>T(t,o,n,r,t.state),[n,o,r,t]),d=()=>{if(t.attributes.current_temperature!=null&&t.attributes.current_humidity!=null)return`${e("current_temperature")}/
      ${e("current_humidity")}`;if(t.attributes.current_temperature!=null)return e("current_temperature");if(t.attributes.current_humidity!=null)return e("current_humidity")},m=()=>{if(c)return h("unavailable");const u=l();return t.attributes.hvac_action&&t.state!==z?`${e("hvac_action")} (${u})`:u},w=()=>t.attributes.target_temp_low!=null&&t.attributes.target_temp_high!=null?`${e("target_temp_low")}-${e("target_temp_high")}`:t.attributes.temperature!=null?e("temperature"):t.attributes.target_humidity_low!=null&&t.attributes.target_humidity_high!=null?`${e("target_humidity_low")}-${e("target_humidity_high")}`:t.attributes.humidity!=null?e("humidity"):"",y=d();return _(H,{className:`action-type-climate ${a}`,...s,children:[p("div",{className:"target",children:c?m():_(f,{children:[_("span",{className:"state-label",children:[m(),t.attributes.preset_mode&&t.attributes.preset_mode!==D?_(f,{children:["- ",e("preset_mode")]}):null]}),p("div",{className:"unit",children:w()})]})}),y&&!c?_("div",{className:"current",children:[h("currently"),":",p("div",{className:"unit",children:y})]}):null]})}export{J as default};
